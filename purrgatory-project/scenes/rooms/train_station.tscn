[gd_scene load_steps=18 format=2]

[ext_resource path="res://scripts/room_instance.gd" type="Script" id=1]
[ext_resource path="res://scripts/rooms/train_station.gd" type="Script" id=2]
[ext_resource path="res://assets/rooms/trainstation.png" type="Texture" id=3]
[ext_resource path="res://scenes/polygon_object_button_template.tscn" type="PackedScene" id=4]
[ext_resource path="res://scenes/sprites/tori_idle.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/sprites/kyungsoon_idle1.png" type="Texture" id=6]
[ext_resource path="res://assets/sprite_masks/kyungsoon_idle1.png" type="BitMap" id=7]
[ext_resource path="res://scripts/char_obj_button.gd" type="Script" id=8]
[ext_resource path="res://assets/sprites/kyungsoon_idle2.png" type="Texture" id=9]
[ext_resource path="res://assets/sprites/kyungsoon_idle3.png" type="Texture" id=10]
[ext_resource path="res://scenes/exit_back.tscn" type="PackedScene" id=11]
[ext_resource path="res://assets/audio/smash1.wav" type="AudioStream" id=12]
[ext_resource path="res://assets/audio/smash2.wav" type="AudioStream" id=13]
[ext_resource path="res://assets/audio/smash3.wav" type="AudioStream" id=14]

[sub_resource type="Animation" id=1]
resource_name = "oliver_idle"
length = 1.5
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:texture_normal")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.5, 1 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ ExtResource( 6 ), ExtResource( 9 ), ExtResource( 10 ) ]
}

[sub_resource type="Animation" id=2]
resource_name = "fadein"
length = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath(".:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.05 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0 ), Color( 1, 1, 1, 1 ) ]
}

[sub_resource type="Animation" id=3]
length = 3.0
tracks/0/type = "value"
tracks/0/path = NodePath(".:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1, 2.9 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 1 ), Color( 1, 1, 1, 1 ), Color( 1, 1, 1, 0 ) ]
}

[node name="room_instance" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = -1280.0
margin_bottom = -720.0
script = ExtResource( 1 )

[node name="state_handler" type="Control" parent="."]
script = ExtResource( 2 )

[node name="bg" type="Sprite" parent="state_handler"]
texture = ExtResource( 3 )
centered = false

[node name="object" parent="state_handler" instance=ExtResource( 4 )]
editor/display_folded = true
dialog_label = "train_display"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="state_handler/object"]
polygon = PoolVector2Array( 281.689, 109.033, 285.372, 239.173, 534.603, 239.173, 537.059, 106.577, 438.84, 104.122, 442.523, 41.507, 372.542, 41.507, 374.997, 105.35 )

[node name="object3" parent="state_handler" instance=ExtResource( 4 )]
editor/display_folded = true
dialog_label = "train_bench"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="state_handler/object3"]
polygon = PoolVector2Array( 939.758, 466.305, 1236.87, 469.989, 1239.33, 509.276, 1272.48, 531.376, 1279.84, 586.624, 1279.6, 631.672, 965.207, 631.953, 944.669, 607.496 )

[node name="object2" parent="state_handler" instance=ExtResource( 4 )]
editor/display_folded = true
dialog_label = "vending_machine"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="state_handler/object2"]
polygon = PoolVector2Array( 823.123, 221.985, 820.667, 512.96, 859.955, 590.307, 972.907, 586.624, 1014.65, 468.761, 1013.42, 212.163, 864.866, 210.935 )

[node name="object4" parent="state_handler" instance=ExtResource( 4 )]
editor/display_folded = true
dialog_label = "train_exits"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="state_handler/object4"]
polygon = PoolVector2Array( 77.8838, 455.256, 137.398, 453.006, 141.726, 101.666, 117.171, 94.2999, 74.2005, 111.488 )

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="state_handler/object4"]
position = Vector2( 1027.62, 7.36646 )
polygon = PoolVector2Array( 74.287, 445.639, 163.826, 444.206, 158.915, 109.033, 130.677, 88.1611, 99.9832, 88.1611, 74.2005, 111.488 )

[node name="object5" parent="state_handler" instance=ExtResource( 4 )]
editor/display_folded = true
dialog_label = "train_tracks"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="state_handler/object5"]
position = Vector2( 2, 0 )
polygon = PoolVector2Array( 261.193, 424.438, 257.111, 461.168, 818.948, 463.889, 816.227, 424.438 )

[node name="object6" parent="state_handler" instance=ExtResource( 4 )]
editor/display_folded = true
dialog_label = "train_columns"

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="state_handler/object6"]
polygon = PoolVector2Array( 140.119, 39.451, 142.84, 586.323, 228.543, 582.242, 263.913, 555.034, 261.193, 47.6132, 227.183, 28.568 )

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="state_handler/object6"]
polygon = PoolVector2Array( 988.995, 51.6944, 987.634, 209.498, 1016.2, 209.498, 1014.84, 466.61, 1099.19, 472.051, 1104.63, 38.0906, 1017.56, 35.3698 )

[node name="tori_idle" parent="state_handler" instance=ExtResource( 5 )]
margin_left = 577.0
margin_top = 212.0
margin_right = 719.0
margin_bottom = 633.0

[node name="ks_and_numa" type="TextureButton" parent="state_handler"]
editor/display_folded = true
margin_left = 222.221
margin_top = 363.411
margin_right = 485.221
margin_bottom = 683.411
focus_mode = 0
enabled_focus_mode = 0
texture_normal = ExtResource( 6 )
texture_click_mask = ExtResource( 7 )
script = ExtResource( 8 )
dialog_label = "ks_and_numa_train"

[node name="AnimationPlayer" type="AnimationPlayer" parent="state_handler/ks_and_numa"]
autoplay = "oliver_idle"
anims/oliver_idle = SubResource( 1 )

[node name="exit" parent="state_handler" instance=ExtResource( 11 )]
room_label = "warehouse2"

[node name="white" type="ColorRect" parent="state_handler"]
visible = false
margin_right = 1280.0
margin_bottom = 720.0
color = Color( 1, 1, 1, 0 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="state_handler/white"]
anims/fadein = SubResource( 2 )
anims/fadeout = SubResource( 3 )

[node name="click" type="Button" parent="state_handler"]
visible = false
margin_right = 1280.0
margin_bottom = 720.0
focus_mode = 0
enabled_focus_mode = 0
flat = true

[node name="smash" type="Node" parent="state_handler"]

[node name="a" type="AudioStreamPlayer" parent="state_handler/smash"]
stream = ExtResource( 12 )
volume_db = -5.0
bus = "SFX"

[node name="b" type="AudioStreamPlayer" parent="state_handler/smash"]
stream = ExtResource( 13 )
volume_db = -5.0
bus = "SFX"

[node name="c" type="AudioStreamPlayer" parent="state_handler/smash"]
stream = ExtResource( 14 )
volume_db = -5.0
bus = "SFX"
[connection signal="pressed" from="state_handler/ks_and_numa" to="state_handler/ks_and_numa" method="_on_char_obj_button_pressed"]
[connection signal="pressed" from="state_handler/click" to="state_handler" method="_on_click_pressed"]
